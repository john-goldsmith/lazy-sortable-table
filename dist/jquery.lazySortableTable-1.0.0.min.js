(function(){!function(t){var e,i,o;e=function(e,s){this.element=e,this.$element=t(e),this.htmlTag=this.$element.prop("tagName")&&"string"==typeof this.$element.prop("tagName")?this.$element.prop("tagName").toLowerCase():"",this.isTable="table"===this.htmlTag,this.hasTableHead=1===this.$element.children("thead").length,this.hasTableBody=1===this.$element.children("tbody").length,this.sortDirection="asc",this.allowedEvents=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","hover","click","dblclick","focus","blur","focusin","focusout","change","select"],this.options=t.extend(!0,{},i,s),this._defaults=i,this._name=o,this.init()},i={firstRowAsHeader:!1,onBeforeSort:!1,onAfterSort:!1,onBeforePopulate:!1,onAfterPopulate:!1,data:!1,event:"click"},o="lazySortableTable",e.prototype.init=function(){var e;e=this,this.getData=function(){var t,e,i,o,s,n;if(this.options.data&&"object"==typeof this.options.data)this.data=this.options.data;else{for(this.data=[],this.$tableRows=this.$element.find("tr"),n=0;n<this.$tableRows.length;){for(t=this.$tableRows.eq(n),i=t.find("td, th"),s=[],o=0;o<i.length;)e=i.eq(o),s.push(e.text().replace(/^\s+|\s+$|\r|\n|\t/g,"")),o++;this.data.push(s),n++}(this.options.firstRowAsHeader||this.hasTableHead)&&this.data.shift()}},this.getTableHeader=function(){this.$headerRow=this.$element.find("tr:first"),this.$headerCells=this.$headerRow.find("td, th"),this.$headerLinks=this.$headerCells.find("a")},this.sort=function(t){this.onBeforeSort(),this.data.sort(function(e,i){return e[t]===i[t]?0:e[t]<i[t]?-1:1}),"desc"===this.sortDirection?(this.data.reverse(),this.sortDirection="asc"):this.sortDirection="desc",this.onAfterSort(),this.populateTable()},this.populateTable=function(){var t,e;for(this.onBeforePopulate(),e=0;e<this.data.length;){for(t=0;t<this.data[e].length;)this.options.firstRowAsHeader||this.hasTableHead?this.$tableRows.not(":first").eq(e).children("td").eq(t).text(this.data[e][t]):this.$tableRows.eq(e).children("td").eq(t).text(this.data[e][t]),t++;e++}this.onAfterPopulate()},this.onBeforeSort=function(){this.options.onBeforeSort&&"function"==typeof this.options.onBeforeSort&&this.options.onBeforeSort(this.data)},this.onAfterSort=function(){this.options.onAfterSort&&"function"==typeof this.options.onAfterSort&&this.options.onAfterSort(this.data)},this.onBeforePopulate=function(){this.options.onBeforePopulate&&"function"==typeof this.options.onBeforePopulate&&this.options.onBeforePopulate(this.data)},this.onAfterPopulate=function(){this.options.onAfterPopulate&&"function"==typeof this.options.onAfterPopulate&&this.options.onAfterPopulate(this.data)},this.checkValidBindEvents=function(){var i,o;if(t.isArray(this.options.event)){o=[];for(i in this.options.event)t.inArray(i,e.allowedEvents)>-1&&o.push(i);this.options.event=o.join(" "),this.bindEvents()}else t.inArray(this.options.event,this.allowedEvents)>-1&&this.bindEvents()},this.bindEvents=function(){0===this.$headerLinks.length?this.$headerCells.on(this.options.event,function(){e.sort(t(this).index())}):this.$headerLinks.on(this.options.event,function(){e.sort()})},this.exec=function(){this.isTable&&(this.getTableHeader(),this.getData(),this.checkValidBindEvents())},this.exec()},t.fn[o]=function(i){return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new e(this,i))})}}(jQuery,window,document)}).call(this);